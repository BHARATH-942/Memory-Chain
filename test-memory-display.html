<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Display Test - MemoryChain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-teal: #1a4d4d;
            --warm-gold: #d4af37;
            --soft-ivory: #f8f6f0;
            --charcoal: #2c2c2c;
            --off-white: #fafafa;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--off-white) 0%, var(--soft-ivory) 100%);
            min-height: 100vh;
        }
        
        .memory-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
        }
        
        .memory-card:hover {
            transform: translateY(-8px) rotateX(5deg);
            box-shadow: 0 20px 40px rgba(26, 77, 77, 0.15);
        }
        
        .test-result {
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }
        
        .test-success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid #10b981;
            color: #059669;
        }
        
        .test-error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #dc2626;
        }
        
        .test-info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid #3b82f6;
            color: #2563eb;
        }
    </style>
</head>
<body>
    <div class="min-h-screen p-8">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">Memory Display Test</h1>
                <p class="text-xl text-gray-600">Testing memory card rendering and data flow</p>
            </div>
            
            <!-- Test Controls -->
            <div class="bg-white rounded-xl p-6 shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Test Controls</h2>
                <div class="flex flex-wrap gap-4">
                    <button id="testBasicRender" class="bg-teal-700 text-white px-4 py-2 rounded-lg hover:bg-teal-800 transition-colors">
                        Test Basic Rendering
                    </button>
                    <button id="testMemoryData" class="bg-blue-700 text-white px-4 py-2 rounded-lg hover:bg-blue-800 transition-colors">
                        Test Memory Data
                    </button>
                    <button id="testEmptyState" class="bg-yellow-700 text-white px-4 py-2 rounded-lg hover:bg-yellow-800 transition-colors">
                        Test Empty State
                    </button>
                    <button id="testLargeDataset" class="bg-purple-700 text-white px-4 py-2 rounded-lg hover:bg-purple-800 transition-colors">
                        Test Large Dataset
                    </button>
                    <button id="clearResults" class="bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors">
                        Clear Results
                    </button>
                </div>
            </div>
            
            <!-- Test Results -->
            <div id="testResults" class="bg-white rounded-xl p-6 shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Test Results</h2>
                <div id="resultsContainer">
                    <div class="test-result test-info">
                        <strong>Ready to test!</strong> Click the buttons above to run different tests.
                    </div>
                </div>
            </div>
            
            <!-- Memory Gallery Test Area -->
            <div class="bg-white rounded-xl p-6 shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Memory Gallery Test Area</h2>
                <div id="memoryGalleryTest" class="memory-grid">
                    <!-- Memory cards will be rendered here -->
                </div>
            </div>
            
            <!-- Memory Details -->
            <div class="bg-white rounded-xl p-6 shadow-lg">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Memory Details Inspector</h2>
                <div id="memoryInspector" class="bg-gray-50 p-4 rounded-lg">
                    <p class="text-gray-600">Click on a memory card to inspect its details</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test data
        const testMemories = [
            {
                id: 1,
                title: "Family Vacation 2023",
                description: "Amazing trip to the mountains with the whole family. We hiked, camped, and made unforgettable memories.",
                type: "photo",
                date: "2023-08-15",
                familyMember: "father",
                encrypted: true,
                thumbnail: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=300&h=200&fit=crop",
                tags: ["vacation", "family", "mountains"],
                owner: "7F3X2Y9A8B4C6D1E5F8G2H3J4K6L9M0N"
            },
            {
                id: 2,
                title: "Graduation Day",
                description: "Sister's college graduation ceremony. So proud of her achievements!",
                type: "photo",
                date: "2024-05-20",
                familyMember: "sister",
                encrypted: true,
                thumbnail: "https://images.unsplash.com/photo-1551434678-e076c223a692?w=300&h=200&fit=crop",
                tags: ["graduation", "achievement", "family"],
                owner: "7F3X2Y9A8B4C6D1E5F8G2H3J4K6L9M0N"
            },
            {
                id: 3,
                title: "Christmas Morning",
                description: "Opening presents on Christmas morning with the whole family.",
                type: "video",
                date: "2023-12-25",
                familyMember: "mother",
                encrypted: true,
                thumbnail: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&h=200&fit=crop",
                tags: ["christmas", "family", "presents"],
                owner: "7F3X2Y9A8B4C6D1E5F8G2H3J4K6L9M0N"
            }
        ];
        
        const familyMembers = [
            { id: 'father', name: 'John Smith', relationship: 'Father' },
            { id: 'mother', name: 'Sarah Smith', relationship: 'Mother' },
            { id: 'sister', name: 'Emma Smith', relationship: 'Sister' },
            { id: 'brother', name: 'Michael Smith', relationship: 'Brother' }
        ];
        
        // Test functions
        function addTestResult(message, type = 'info') {
            const container = document.getElementById('resultsContainer');
            const result = document.createElement('div');
            result.className = `test-result test-${type}`;
            result.innerHTML = `
                <strong>${new Date().toLocaleTimeString()}</strong><br>
                ${message}
            `;
            container.appendChild(result);
            
            // Scroll to bottom
            container.scrollTop = container.scrollHeight;
        }
        
        function clearResults() {
            document.getElementById('resultsContainer').innerHTML = '';
            addTestResult('Results cleared. Ready for new tests!', 'info');
        }
        
        function renderMemoryCard(memory) {
            const familyMember = familyMembers.find(f => f.id === memory.familyMember);
            
            return `
                <div class="memory-card rounded-xl overflow-hidden shadow-lg cursor-pointer" onclick="inspectMemory(${memory.id})">
                    <div class="relative">
                        <img src="${memory.thumbnail}" alt="${memory.title}" class="w-full h-48 object-cover">
                        <div class="absolute top-2 right-2">
                            <span class="bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs">
                                ${memory.type.toUpperCase()}
                            </span>
                        </div>
                        ${memory.encrypted ? `
                            <div class="absolute top-2 left-2">
                                <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                        ` : ''}
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-900 mb-2">${memory.title}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-2">${memory.description}</p>
                        <div class="flex justify-between items-center text-xs text-gray-500">
                            <span>${new Date(memory.date).toLocaleDateString()}</span>
                            <span>${familyMember ? familyMember.name : 'Unknown'}</span>
                        </div>
                        <div class="mt-2 flex flex-wrap gap-1">
                            ${memory.tags.map(tag => `
                                <span class="bg-teal-100 text-teal-700 px-2 py-1 rounded-full text-xs">${tag}</span>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }
        
        function renderMemories(memories) {
            const container = document.getElementById('memoryGalleryTest');
            
            if (memories.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.467-.881-6.08-2.33"></path>
                        </svg>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">No memories found</h3>
                        <p class="text-gray-600">Upload your first memory to get started.</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = memories.map(memory => renderMemoryCard(memory)).join('');
        }
        
        function inspectMemory(memoryId) {
            const memory = testMemories.find(m => m.id === memoryId);
            if (!memory) return;
            
            const familyMember = familyMembers.find(f => f.id === memory.familyMember);
            
            const inspector = document.getElementById('memoryInspector');
            inspector.innerHTML = `
                <h3 class="font-bold text-lg mb-4">Memory Details</h3>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div><strong>ID:</strong> ${memory.id}</div>
                    <div><strong>Title:</strong> ${memory.title}</div>
                    <div><strong>Type:</strong> ${memory.type}</div>
                    <div><strong>Date:</strong> ${new Date(memory.date).toLocaleDateString()}</div>
                    <div><strong>Family Member:</strong> ${familyMember ? familyMember.name : 'Unknown'}</div>
                    <div><strong>Encrypted:</strong> ${memory.encrypted ? 'Yes' : 'No'}</div>
                    <div><strong>Tags:</strong> ${memory.tags.join(', ')}</div>
                    <div><strong>Owner:</strong> ${memory.owner.substring(0, 8)}...</div>
                </div>
                <div class="mt-4">
                    <strong>Description:</strong>
                    <p class="mt-2 text-gray-700">${memory.description}</p>
                </div>
                <div class="mt-4">
                    <strong>Thumbnail URL:</strong>
                    <p class="mt-1 text-sm text-gray-600 break-all">${memory.thumbnail}</p>
                </div>
            `;
        }
        
        // Event listeners
        document.getElementById('testBasicRender').addEventListener('click', () => {
            addTestResult('Testing basic memory card rendering...', 'info');
            
            try {
                renderMemories(testMemories.slice(0, 1));
                addTestResult('âœ… Basic rendering test passed! Memory card displayed successfully.', 'success');
                addTestResult('ðŸ“ Card includes: image, title, description, metadata, tags, and encryption indicator', 'info');
            } catch (error) {
                addTestResult(`âŒ Basic rendering test failed: ${error.message}`, 'error');
                console.error('Basic rendering error:', error);
            }
        });
        
        document.getElementById('testMemoryData').addEventListener('click', () => {
            addTestResult('Testing memory data structure and integrity...', 'info');
            
            try {
                // Test data structure
                const requiredFields = ['id', 'title', 'description', 'type', 'date', 'thumbnail', 'tags'];
                const missingFields = [];
                
                testMemories.forEach((memory, index) => {
                    requiredFields.forEach(field => {
                        if (!(field in memory)) {
                            missingFields.push(`Memory ${index}: missing ${field}`);
                        }
                    });
                });
                
                if (missingFields.length > 0) {
                    addTestResult(`âŒ Memory data test failed: ${missingFields.join(', ')}`, 'error');
                } else {
                    addTestResult('âœ… Memory data structure test passed! All required fields present.', 'success');
                    addTestResult(`ðŸ“Š Tested ${testMemories.length} memories with ${requiredFields.length} required fields each`, 'info');
                }
                
                // Test data types
                const typeErrors = [];
                testMemories.forEach((memory, index) => {
                    if (typeof memory.id !== 'number') typeErrors.push(`Memory ${index}: id should be number`);
                    if (typeof memory.title !== 'string') typeErrors.push(`Memory ${index}: title should be string`);
                    if (typeof memory.description !== 'string') typeErrors.push(`Memory ${index}: description should be string`);
                    if (!Array.isArray(memory.tags)) typeErrors.push(`Memory ${index}: tags should be array`);
                    if (typeof memory.encrypted !== 'boolean') typeErrors.push(`Memory ${index}: encrypted should be boolean`);
                });
                
                if (typeErrors.length > 0) {
                    addTestResult(`âŒ Data type validation failed: ${typeErrors.join(', ')}`, 'error');
                } else {
                    addTestResult('âœ… Data type validation passed! All fields have correct types.', 'success');
                }
                
            } catch (error) {
                addTestResult(`âŒ Memory data test failed: ${error.message}`, 'error');
                console.error('Memory data test error:', error);
            }
        });
        
        document.getElementById('testEmptyState').addEventListener('click', () => {
            addTestResult('Testing empty state rendering...', 'info');
            
            try {
                renderMemories([]);
                addTestResult('âœ… Empty state test passed! Proper empty state message displayed.', 'success');
                addTestResult('ðŸ“ Empty state includes: icon, title, description, and call-to-action', 'info');
            } catch (error) {
                addTestResult(`âŒ Empty state test failed: ${error.message}`, 'error');
                console.error('Empty state error:', error);
            }
        });
        
        document.getElementById('testLargeDataset').addEventListener('click', () => {
            addTestResult('Testing large dataset rendering (20 memories)...', 'info');
            
            try {
                // Generate large dataset
                const largeDataset = [];
                for (let i = 0; i < 20; i++) {
                    largeDataset.push({
                        ...testMemories[i % testMemories.length],
                        id: i + 100,
                        title: `Memory ${i + 1}`,
                        description: `This is memory number ${i + 1} in the large dataset test.`
                    });
                }
                
                renderMemories(largeDataset);
                addTestResult(`âœ… Large dataset test passed! ${largeDataset.length} memories rendered successfully.`, 'success');
                addTestResult('âš¡ Performance: All cards rendered without issues', 'info');
            } catch (error) {
                addTestResult(`âŒ Large dataset test failed: ${error.message}`, 'error');
                console.error('Large dataset error:', error);
            }
        });
        
        document.getElementById('clearResults').addEventListener('click', clearResults);
        
        // Initialize with basic test
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                document.getElementById('testBasicRender').click();
            }, 1000);
        });
    </script>
</body>
</html>